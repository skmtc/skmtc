{
  "$schema": "https://json-schema.org/draft-04/schema",
  "$id": "https://schemas.skmtc.dev/client.json",
  "title": "Settings",
  "description": "Client settings for Skmtc code generation",
  "type": "object",
  "properties": {
    "accountName": {
      "type": "string",
      "description": "Name of account where the generator stack is running."
    },
    "deploymentId": {
      "type": "string",
      "description": "Id of stack deployment on server."
    },
    "settings": {
      "$ref": "#/definitions/ClientSettings"
    }
  },
  "required": [
    "settings"
  ],
  "definitions": {
    "ClientSettings": {
      "properties": {
        "basePath": {
          "type": "string",
          "description": "Base path for generated code. Defaults to 'dist'."
        },
        "packages": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ModulePackage"
          }
        },
        "generators": {
          "$ref": "#/definitions/Generators"
        }
      },
      "required": [
        "generators"
      ]
    },
    "ModulePackage": {
      "properties": {
        "rootPath": {
          "type": "string",
          "description": "Root path of the package. When importing from within same package, root path is trucated and '@' is used to denote root."
        },
        "moduleName": {
          "type": "string",
          "description": "Optional module name for the package used for external imports."
        }
      },
      "required": [
        "rootPath"
      ]
    },
    "Generators": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Generator"
      },
      "description": "Array of generator settings."
    },
    "Generator": {
      "oneOf": [
        {
          "$ref": "#/definitions/OperationsGenerator"
        },
        {
          "$ref": "#/definitions/ModelsGenerator"
        }
      ]
    },
    "Models": {
      "type": "object",
      "additionalProperties": {
        "type": "boolean"
      }
    },
    "OperationsGenerator": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Id of operation generator. For example '@skmtc/rtk-query'."
        },
        "exportPath": {
          "type": "string",
          "description": "Optional path prefix for operation 'exportPath' setting. Useful for grouping all code from a generator together."
        },
        "description": {
          "type": "string",
          "description": "Brief generator description"
        },
        "operations": {
          "$ref": "#/definitions/PathsObject"
        }
      },
      "required": [
        "id",
        "operations"
      ]
    },
    "ModelsGenerator": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Id of model generator. For example '@skmtc/zod'."
        },
        "exportPath": {
          "type": "string",
          "description": "Optional path prefix for model 'exportPath' setting. Useful for grouping all code from a generator together."
        },
        "description": {
          "type": "string",
          "description": "Brief generator description"
        },
        "models": {
          "$ref": "#/definitions/ModelsObject"
        }
      },
      "required": [
        "id",
        "models"
      ]
    },
    "ModelsObject": {
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/EnrichedSetting"
      }
    },
    "EnrichedSetting": {
      "type": "object",
      "properties": {
        "selected": {
          "type": "boolean"
        },
        "enrichments": {}
      }
    },
    "PathsObject": {
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/MethodsObject"
      },
      "description": "Record which maps API paths to its methods."
    },
    "MethodsObject": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "get": {
            "$ref": "#/definitions/EnrichedSetting"
          },
          "post": {
            "$ref": "#/definitions/EnrichedSetting"
          },
          "put": {
            "$ref": "#/definitions/EnrichedSetting"
          },
          "delete": {
            "$ref": "#/definitions/EnrichedSetting"
          },
          "patch": {
            "$ref": "#/definitions/EnrichedSetting"
          },
          "options": {
            "$ref": "#/definitions/EnrichedSetting"
          },
          "head": {
            "$ref": "#/definitions/EnrichedSetting"
          },
          "trace": {
            "$ref": "#/definitions/EnrichedSetting"
          }
        }
      },
      "description": "Record which maps API methods to their respective operation settings."
    }
  }
}