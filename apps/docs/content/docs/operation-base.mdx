---
title: "OperationBase"
description: "Base class for operation generators in the SKMTC DSL system."
kind: "class"
filename: "skmtc/deno/core/dsl/operation/OperationBase.ts"
line: 144
---

# OperationBase

Base class for operation generators in the SKMTC DSL system.

`OperationBase` extends [ContentBase](./content-base.mdx) to provide specialized functionality for
generating code from OpenAPI operations. It offers type-safe methods for inserting
related operations and models, managing complex operation dependencies, and handling
enrichments specific to API operations.

This class serves as the foundation for creating custom operation generators that
transform OpenAPI operations into various code artifacts like API clients, server
handlers, validation middleware, or documentation.

## Key Features

- **Operation Insertion**: Insert related operations with automatic dependency tracking
- **Model Integration**: Seamlessly insert related models from operation schemas
- **Schema Normalization**: Handle complex request/response schema references
- **Export Management**: Control which operations are exported from generated files
- **Enrichment Support**: Extend functionality with operation-specific enrichment data
- **Type Safety**: Full TypeScript support with generic enrichment types


**@template** - Optional type for custom enrichment data


## Example

Basic API client generator
```typescript
import { OperationBase, Definition } from '@skmtc/core';

class ApiClientMethod extends OperationBase {
  toDefinition(): Definition {
    const { method, path, operationId } = this.operation;

    return new Definition({
      name: operationId || `${method}${this.pascalCasePath()}`,
      content: `async ${operationId}(${this.generateParameters()}) {
        return this.request('${method}', '${path}', ${this.generateRequestBody()});
      }`
    });
  }
}
```


## Example

With request/response models
```typescript
class TypedApiMethod extends OperationBase {
  toDefinition(): Definition {
    const operation = this.operation;

    // Generate request model if needed
    let requestType = 'void';
    if (operation.requestBody?.content?.['application/json']?.schema) {
      const requestModel = this.insertNormalizedModel(
        new RequestModel({ ... }),
        {
          schema: operation.requestBody.content['application/json'].schema,
          fallbackName: `${operation.operationId}Request`
        }
      );
      requestType = requestModel.value;
    }

    // Generate response model
    const responseSchema = operation.responses?.['200']?.content?.['application/json']?.schema;
    const responseModel = this.insertNormalizedModel(
      new ResponseModel({ ... }),
      { schema: responseSchema, fallbackName: `${operation.operationId}Response` }
    );

    return new Definition({
      name: operation.operationId,
      content: `async ${operation.operationId}(data: ${requestType}): Promise<${responseModel.value}> {
        return this.request('${operation.method}', '${operation.path}', data);
      }`
    });
  }
}
```


## Example

With enrichments
```typescript
type AuthEnrichment = {
  requiresAuth: boolean;
  permissions: string[];
};

class SecuredApiMethod extends OperationBase<AuthEnrichment> {
  toDefinition(): Definition {
    const enrichment = this.settings.enrichment;
    const requiresAuth = enrichment?.requiresAuth ?? false;

    const authCheck = requiresAuth
      ? 'this.checkAuth();'
      : '';

    return new Definition({
      name: this.operation.operationId,
      content: `async ${this.operation.operationId}() {
        ${authCheck}
        return this.request('${this.operation.method}', '${this.operation.path}');
      }`
    });
  }
}
```

## Class Definition

### Constructors

- `constructor(...)`

### Properties

- `settings: ContentSettings`
- `operation: OasOperation`
- `generatorKey: GeneratorKey`

### Methods

- `insertOperation(insertable: OperationInsertable, operation: OasOperation, ...): Inserted`
- `insertModel(insertable: ModelInsertable, refName: RefName, ...): Inserted`
- `insertNormalizedModel(insertable: ModelInsertable, ..., ...): InsertNormalisedModelReturn`
- `defineAndRegister(...): Definition`
- `register(args: BaseRegisterArgs): void`

## Source

Located at `skmtc/deno/core/dsl/operation/OperationBase.ts:144:0`
